pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
--bounce
--squidlight aka wesley aka slyathas

function _init()

 bframes=20
	p={
		x=16,
		y=16,
		h=16,
		w=16,
		dx=0,
		dy=0,
		offy=0,
		ratio=1,
		hist={{16,16}}
	}
	g=0.3
	
	upd= game_update
end

function _draw()
	cls()
	camera(mid(p.x-64, 0, 1016), 0)
	map()
	local sp=72
	local sx,sy=(sp%16)*8,(sp\16)*8
	local dw,dh = 16*p.ratio,16/p.ratio
	
	for i =1, #p.hist do
	 cols= {0,0,0,2,8,9,10}
	 col_offset = i\3
	 for j=0,3 do
	 	local tcol = cols[col_offset+j]
	 	local scol = cols[j+4]
	 	pal(scol, tcol)
	 	if(tcol ==0 or tcol==nil) palt(scol,true)
	 end
	 local h=p.hist[i]
		spr(111, h[1]-4, h[2]-4)
		palt()
		pal()
	end
	sspr(sx,sy,16,16,p.x-dw/2,p.offy + p.y-dh/2,dw,dh)
end

function _update60()
 --flip()flip()flip()
	upd()
end

function game_update()
	player_update()
end
-->8
--player
function player_update()
 input()
	local bf = p.bounce
	if bf then
		p.ratio = 1-sin(bf/bframes)/4
		p.offy=p.h-(p.h/p.ratio)
		p.bounce = p.bounce+1
		
		if (bf ==15) p.dy = -5 p.grounded=nil
		if bf == bframes then
			p.bounce=nil
		end
	else
		p.dy += g
		player_collision()
	end
	p.y = p.y+p.dy
	p.x = p.x+p.dx
	add(p.hist,{p.x,p.y})
	if #p.hist > 16 then
		deli(p.hist,1)
	end
end

function input()
	if btn(➡️) then 
		p.dx += 0.1 
	end
	if btn(⬅️) then 
		p.dx -= 0.1
	end
end


function player_collision()
 local bottom=p.y+p.h/2
 local left=p.x-p.w/2
 local right = p.x+p.w/2
	for i=bottom,bottom+p.dy,8 do
		if fget(mget(left/8,i/8), 0) 
		or fget(mget(right/8,i/8),0)
		then
		 sfx(9)
		 p.bounce=0
		 p.grounded = true
			p.dy=0
			p.y=(i\8)*8-p.h/2
		end
	end
end
__gfx__
00000000000000000000000000000000000000000770000007700000007700000007000000070000000770000000000000000000000000000000000000000000
00000000000200000002000000000000000000000770070077070000007700000070000000007000070770700077000000000000000000000000000000007700
00700700000220200000000000000000000200000000700077070000000000000770000000007700007777000077000000000000000000000000000000077000
00077000000000000000000000282000000220200007000007700000000000000770000000007700000770007777770000000000077777000000000000770000
00077000000000000028880020898000000820220070000077070700000000000770000000007700007777000077000000770000000000000000000007700000
00700700022288002289880000898080002820000600770077007000000000000070000000007000070770700077000000770000000000000770000077000000
00000000289888002289982002888888028820000000770007770700000000000007000000070000000770000000000007700000000000000770000000000000
00000000889998200228988202288898289988000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777000288999820288989822888822899998200000020000020000000002000020000000777700000000000000000000007700000000000077000000777700
77000700028999980889998829999820899999800000220000020000000002000020000007700070000000000000000000077000000000000007700007700770
77007700089999980999998289999980289999820022212000212000000002200022000007700070007700000077000000770000077777700000770000000770
77070700289997980999998208979982088999980022122000212200002002200222200000777770000000000000000007700000000000000000077000077700
77700700299779920897799008997798089977980221122002112120002021200212200000000070007700000077000000770000077777700000770000077000
77000700289777920297779008977790089777922111221221112212022221202112200007700070000000000077000000077000000000000007700000000000
07777000029777920097779000977790029777922111111221111112021211122112122000777700000000000770000000007700000000000077000000077000
00000000008979800089798000897980008979800111111001111110221121111121111200000000000000000000000000000000000000000000000000000000
33333333333333333333333333333333333333333333333333333333333333331111111111111111111111111111111111111111111111111111111111111111
33d553333533dd53313335ddddddd55335dddd3dddddd53333555551313331531151555555555511115555555555551111555555555555511555555555555511
13ddd331153dd51115533ddddddddd511ddddd5ddddddd3113dddd55353535511555555dddd5d55115dddddd55ddd551155ddddddddd5d5115dddd5dddddd551
15dddd511d5ddd511dd35ddddddddd511ddddd5ddddddd5115ddddd55d353d511555d55dddd5dd511d5ddddd5ddddd5115d5ddddddd5555115555d5ddddd5d51
1ddddd511dd5d5511d55dddddddddd511ddddd5ddddddd511dddddd5dd3d5d5115d5dd5ddddddd511dd5dd555ddddd5115dd5ddddd5511111111555ddd55dd51
15dddd5115dd5d511555dddddddddd5115555555d51155501ddddd5ddd5ddd5115dddddddddddd511dd5d5dd5ddddd5115ddd55dd51100000000115dd55d5551
155555511555555115555ddddddddd511dd155555d15dd511ddddd55dddddd5115d5dd5ddddddd511ddd5dddd5dddd5115ddd515510000000000001551dddd51
01111110011111101dddd5ddddddd5511dd55ddddd5d5d5115ddd5d5dd5ddd5115dddddd5ddddd511ddd5dddd515551015555551100000000000000115555551
33333333333333331dddddddddd55d511d555555555ddd511d5d55dd5ddddd511ddddd5d5ddddd5115ddd555515ddd5111111111000011110111111011111111
35dddd51355d33531ddddddddd55dd51155d5d555ddddd511dd51155555dd5511d5ddddd5d5d5d511ddd5ddd55dddd5115dddd51000111111000100115dddd51
1dd11d5115dd5351011d5d5dd5dd5d5115d5ddd5d5d5dd51015555d5ddd5555115d5dd5d55dddd5115d5ddddd55555511ddddd5100110111100001011dddd551
1d15515115d5d5511551d5d515ddd551015d5d5d15155551155d5d5d5ddd555115555d55555d5d5115555d5d5d5ddd511ddddd5101100011100000111d5ddd51
1d55555115dddd511555551155d5d5511555d5d15555555115d555d5d5d5555115d5d55555d5555115d5d5d5555dd5511ddddd51011001101100000115dddd51
15d5d55115dd5551151555555d5d5551115555555dd5d551155555555555515115555555155555511555555d5555555115dddd51011111001110000115dddd51
15555551155555511151155555555511111155555555551111515111555551111155551515555511115551555115551115555551111110001011000115555551
01111110011111100111111111111110011111111111111001111111111111100111111111111110011111111111111011111111110000001111111111111111
05555555555555555555555055677655000007600000700000000000000000000000000000000000000000000000000900009999900a00001511115111111151
5566666666666666666666555655556500007665000070000008888008888000000000aaaa00000000000000000909aa009999aa09000a905115511115511115
56676767676767676767766556677665000070600000600000887888888888000000aaaaaaaa0000000000000000aaaa09a9aaaa000090001151151151151111
5677777777777777777777655667766500007665000060000087888888888800000aa7aaaaaaa00000000009090a9a9a099a9909a00000001151151511115151
567776767676767676767765556776550600660500006000088888888888888000aa7aaaaaaaaa000000a09a00a9a9a999a99790009000001151151511115111
567666766666666667677665565555650650555500776660088888888888888000a7aaaaaaaaaa000000099a09aa9a0099a970000a0000001115511511115111
56776756666666667577666556677665066501100005650008888888888888800aaaaaaaaaaaaaa0000099a70aa9a0009aa09000090000001111111151151115
56766665555555555667766556677665006656665055000008888888888888800aaaaaaaaaaaaaa00009aa779aaa90009aa90000000000001511111115511111
56677665555575555566765555555555000656666550000000888888888888000aaaaaaaaaaaaaa06666665766666665a9454454454aaa401115555111111111
56776665565755665555555556677665000066666550000000888888888288000aaaaaaaaaaaaaa0666666566666666504454454454a09405151111511151155
566776655657576765655656555555550000666665000000000888888828800000aaaaaaaaaa9a00666665556666665504454454454aa9401151111515111155
567766655757577775767557577777750007666660000000000088888288000000aaaaaaaaa9aa00555555555555555504454454454a99401151111511155111
5667766557575676655767567555555700065005660000000000088828800000000aaaaaaa9aa0006655577666555776a9454454454454401151111511511511
56776665565756666565565655677655007665000656000000000088880000000000aaaaaaaa00006665766666657666a9454454454454401115555111511511
5667766556575566555555555677666507500000066500000000000880000000000000aaaa000000666566666665766604454454454454405111111111155115
56776665555575555567665556677665006500000000000000000000000000000000000000000000665566666655566600000000000000001511111115111151
56776675555755555677666556776665000000765000000094500000000009450000000000000000000000000000000007777777777777a00040000000000000
5667675666557565657766655667766500000766550000009451999999941945000000000000000000000a77777777000777aaaaaaaaaa900494000000288200
567776676765756576677665557766550060076655000000945194444445194500000000000000000000a77777775670077aaaaaaaaaa99049a9400002899820
566777777775757577777665755555570065076655000000945145555555194500007666666650000000a77777775557077aaaaaaaaaa99004979400089aa980
5666767676757575676766655777777500650666550005009450000000000945007655555555550000007755575755700077aaaaaaaaa90000497940089aa980
5666666666657565666666655555555500650555500065009450000000000945006444444444450000007777777750000077aaaaaaaa990000049a9402899820
55666666665575656666665556677665000650110006550094500000000009450755555555555550000077575557500000077aaaaaa990000000494000288200
055555555557555555555550555555550000656655055000945000000000094506444444444445500000777777775000000007aaa99000000000040000000000
0076666500565000000065666555000000000566655500009451999999941945011111aaaa1111100005675575575000000000a99900000001c7c10000000300
0765666655500000000006666555000000000666655500009451944444451945064545900a55455000a75777777750000000007a990000001c7c100000033b30
076656665500000000000666655000000000066665655000945145555555194506454599aa5545500a756777777750000000007aa9000000c7cc1000003bbab3
00056566500000000000766655500000000076665506560094500000000009450645454555554550a7765555555550000000007aa90000001c77cc1003baab30
0076566500000000000065005655000000006500000765009450000000000945064545454545455077777777765150000000077aa990000001cc77c103baab30
006500065000000006576500006560000007650000000000945000000000094506454545454545500677777765115000000077aaaa990000001c7c103babb300
07500006565000000075000000665000076500000000000094500000000009450655555555555550006677766615000000077aaaaaa9900001c7c10003b33000
066500006500000000000000000000000000000000000000945000000000094500000000000000000006666665500000007aaaaa999999001c7c100000300000
000000bbbb0000000090009999000900008000888800080000c000cccc000c000000000000000000000000000000000030000030000000000000000000000000
000b0bbbbbb0b00000090999999090000008088888808000000c0cccccc0c0000000000000000000000000000000000003000300000333333300033000000000
0000bb3bb3bb0000000999a99a999000000888f88f888000000ccc7cc7ccc0000000000000000000000000000000000000333000003333300033300000000000
00000bbbbbb00000000099999999000000008888888800000000cccccccc00000000000000000000000000000000000000333300033333300033330000000030
00000bb00bb000000000099009900000000008800880000000000cc11cc000000000000000000000000000000000000003030300333333000303030033300003
00000bbbbbb000000000090990900000000008000080000000000c1111c000000000000000000000000000000000000000333303333300000033330333330003
0bb000bbbb000000099000999900000008800088880000000cc000c11c0000000000000000000000000000000000000033333300000000033333330033333003
000bb0bbbb0000000009909999000000008888888880000000ccccccccc000000000000000000000000000000000000000033003333000030000300003333303
00000bbbbbb00000000009999990000000008888888800000000cccccccc00000000000000000000000000000000000003330033333333030003003330000000
000000bbbb0bb0000000009999099000000008888888800000000cccccccc0000000000000000000000000000000000000000333333333330330033333333333
000000bbbb000bb00000009999000990000008888880880000000cccccc0cc000000000000000000000000000000000000033333333033300003333333303330
000000bbbb00000000000099990000000000008888000880000000cccc000cc00000000000000000000000000000000000000033300303000000003330030300
000000bbbb00000000000099990000000000008888000000000000cccc0000000000000000000000000000000000000000000000033300000000000000330000
00000bb00bb000000000099009900000000008800880000000000cc00cc000000000000000000000000000000000000000000000033000000000000003300000
0000bbb000bb0000000099900099000000008880008800000000ccc000cc00000000000000000000000000000000000000000000300000000000000003000000
0000000000bbb000000000000099900000000000008880000000000000ccc0000000000000000000000000000000000000000000000000000000000003000000
00700700000760000000000000077000007777000077700700077000000000000007700000777700007777007777777700070000770000000007700000765000
00700700007776000000000000077000071111700700077700077000000000000776677007111170077777707111111707777700070000000007700700576500
777777770077776000000000007777007111111770000777000000001777777176666667711111177777777707dddd7070070070077777770000007075076500
00700700707777700007700000777700711111177000777700077000717777177111111771711717771771770075570007770000070707070077770067766500
00700700767777700077770007777770711111177000000000077000771771777711117771111117777777770007700000077700077070700707700056667650
77777777777777600777777007777770711111177000000700000000777117777771177771177117777117770007700070070070070707007007770005556765
00700700077776507777777777777777071111700700007000077000711771177117711707111170077777700007700007777700777777770007007000005675
00700700007765007777777777777777007777000077770000077000177777711777777100777700007777000077770000070000770000770770007000000555
00000000000770000007000075777777757777777560066000005665070000700770000007700000777000007777777500777000000700700077770077777770
0770077000777700000700007577777775766667757667760005677500755700000700000007000000077700766766750717270006777770076dd67076666670
077007700777777000777000757777777576666775777777505677750057750000700000007000000000007776676675711722707771777676d55d6776666670
00000000777777770077700075777777757666677577667775677775057667500700000000070000000777007667667577767770006776777d5115d707666700
0000000005555550077777007577777775777777756600677567777557666675077700000770000077700000766766757557dd7007777d677d5115d707666700
0770077007777770077777007000000070000000756000065056777557666675000000000000000000077700576767500757d700006677d076d55d6700767000
0770077007755770777777707000000070000000700000000005677505766750000000000000000000000077576767500077700007777770076dd67000767000
00000000077557700007000070000000700000007000000000005665005775000000000000000000000777000577750000000000760760670077770000070000
00000000005676506776765000000000075765707575575700777700007777000077770000000077000007000000000055555555555555556576567770000000
00055000056777650577576577577577677777766777777607dddd70077777700777777000000777000070700000000056666665566666655555555570000000
0056650005767765567777777757757756777765667777667dd77dd7777dd7777d7dd7d700007707000007000770077056777765567777657776567770700070
0567765005777750566777776777777605677650566666657d7dd7d777d77d777dddddd700077007000007007667766756777765567dd7655555555570700070
0567765005677650056676650677776000577500056776507d7dd7d777d77d7777dddd7700770007007007007657765756777765567dd7657656777700707070
0057750000577500007667500567765005677650056666507dd77dd7777dd77777dddd7707700007077007000770077056777765567777655555555500707070
05677650056776500577665005677650567777655677776507dddd70077777700777777077000007007007000000000056666665566666656567777700007000
56777765567777655677776556777765677777766777777600777700007777000077770070000007000770000000000055555555555555555555555500007000
00066000000067760011223300000000000000007666666600777700077777777777777777767777777777700007700000077000000770000000770000007700
006dd600000675570011223302200220022002206dddddd507889970777766666666666666657666666667657007700700077000000770000000770000007700
06d77d600067505744556677288228822882288205cccc5078889997776666666666666666657666666666550700007000000000000000000000000000000000
6d7117d606776576445566772882288228e22e82006bb50078889997766666666666666666657666666666650077770077777777007777000077770000777777
06d77d60675677608899aabb0220022002200220006aa6007bbbaaa7766666666666666666657666666666650007700000077000070770700707707007077000
006dd600750576008899aabb0000000000222200079799607bbbaaa7766666666666666666657666666666550007700000077000700770070707700707077000
0006600075576000ccddeeff00000000028ee8207878888507bbaa70676666666666666666657666666655550070070000700700007007000070070000700700
0000000067760000ccddeeff00000000002222006555555500777700065555555555555555555555555555500700007007000070070000700700007007000070
0cba9877789abc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000777777777777770
00000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007a77777777777765
000777777700000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077a7777777777655
00700676677700770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
07706776676677760000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
00777777777776000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
06000700007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
00777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007776666666666555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007765555555555155
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007655555555555515
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555555555555550
__gff__
0000000000000000000000000000000000000000000000000000000000000000000001010101010100000000000000000000000000000000000000000000000001010101020200000000000000000000010101010202000000000000000000000101010100000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010100000000000000000000000000000000000000000000000000000000000000000000000000
__map__
50292a2b2c2d2e2f28292a2b28292a2b282928292a2b282928292a2b282928292a2b282928292a2b282928292a2b282928292a2b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50393a3b3c17163f38393a3b38393a3b383938393a3b383938393a3b383938393a3b383938393a3b383938393a3b383938393a3b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50292a2b28292a2b2c2d2e2f28292a2b28292a2b282928292a2b282928292a2b282928292a2b282928292a2b282928292a2b282900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50393a3b38393a3b3c18173f38393a3b38393a3b383938393a3b383938393a3b383938393a3b383938393a3b383938393a3b383900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50292a2b28292a2b28292a2b2c2d2e2f2a2b28292a2b2a2b28292a2b2a2b28292a2b2a2b2c2d2e2f2a2b28292a2b2a2b28292a2b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50393a3b38393a3b38393a3b3c15163f3a3b38393a3b3a3b38393a3b3a3b38393a3b3a3b3c15163f3a3b38393a3b3a3b38393a3b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
502928292a2b28292a2b282928292a2b282928292a2b282928292a2b282928292a2b282928292a2b282928292a2b28292a2b282900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
503938393a5141414161383938393a3b383938393a3b383938393a3b383938393a3b383938393a3b383938393a3b38397e3b383900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
502b28292a2b28292a2b28292a2b282928292a2b282928292a2b282928292a2b282928292a2b282928292a2b28292a2b7e292a2b000000007e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
503b38393a3b38393a3b38393a3b383938393a3b383938393a3b383938393a3b383938393a3b383938393a3b38393a3b7e393a3b000000007e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50292a2b28292a2b28292a2b28292a2b28292c2d2e2f282928292a2b2c2d2e2f2a2b2a2b28292a2b282928292c2d2e2f7e292a2b000000007e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50393a3b38393a3b38393a3b38393a3b38393c15163f383938393a3b3c15163f3a3b3a3b38393a3b383938393c15163f38393a3b000000007e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
502b28292a2b28292a2b28292a2b282928292a2b282928292a2b2829282928292a2b282928292a2b28294445282928292a2b282900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
503b38393a3b38393a3b38393a3b383938393a3b383938393a3b3839383938393a3b383938393a3b38395455383938393a3b383900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5023242526272223242522232425262724252627222324252223242526272425262722232425222324252627242526272223242522232425262741414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141
5033343536373233343532333435363734353637323334353233343536373435363732333435323334353637343536373233343532333435363700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000300000c7500f041130311312500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020000052670061710267006171236700617123570161712357016170a157006170d147006170d147006170b047006170b037006170a037006170a727006170b727006170c717006170b117006170811700617
